**–í–°–ï –∞–∫—Å–∏–æ–º—ã c –Ω–µ–±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º:**
![[Pasted image 20260129151149.png]]

**–ü–û–õ–ù–ê–Ø –¢–ê–ë–õ–ò–¶–ê**
![[Pasted image 20260129151324.png]]

–ó–¥–µ—Å—å –≤–∏–¥–∏–º –º–∏–∫—Ä–æ–ø–∞—Ç—Ç–µ—Ä–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä(—Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –µ–≥–æ –ø–µ—Ä–µ–¥–∞—á—É). –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —ç—Ç–æ–≥–æ –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –≤ —Ç–æ–º —á—Ç–æ –º–µ–∂–¥—É —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–∞–Ω–∞–ª–∞ –∏ –µ–≥–æ –ø–µ—Ä–µ–¥–∞—á–µ–π –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∏–∫–∞–∫–∏—Ö –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –í—Å—è –∑–∞–ø–∏—Å—å –≤ –∫–∞–Ω–∞–ª –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ.
–ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–∞–Ω–∞–ª —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ –ø—Ä–∏ —ç—Ç–æ–º –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –º—ã –º–æ–∂–µ–º –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –≤ –Ω–µ–≥–æ:
```go
func writer() <-chan int {
	ch := make(chan int)

	go func() {
		for i := range 5 {
			ch <- i + 1
		}
		close(ch)

	}()

	return ch
}
```

–î–æ–ø—É—Å—Ç–∏–º –º—ã –∑–∞—Ö–æ—Ç–µ–ª–∏ —Å–¥–µ–ª–∞—Ç—å –¥–≤—É—Ö –ø–∏—Å–∞—Ç–µ–ª–µ–π –∏ –¥–ª—è —ç—Ç–æ–≥–æ –º—ã —Å–¥–µ–ª–∞–ª–∏ –µ—â—ë –æ–¥–Ω—É –≥–æ—Ä—É—Ç–∏–Ω—É. –ß—Ç–æ–±—ã –æ–Ω–∏ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ –∏ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –±–µ–∑`deadlock'a`, –Ω–∞–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `waitGroup'—É`. + —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π **–í–ù–ï –ì–û–†–£–¢–ò–ù**. –ü–æ—ç—Ç–æ–º—É –ø–æ–ª—É—á–∞–µ–º –≤–æ—Ç —á—Ç–æ:

```go
func writer() <-chan int {
	ch := make(chan int)
	wg := &sync.WaitGroup{}

	wg.Add(2)
	go func() {
		defer wg.Done()
		for i := range 5 {
			ch <- i + 1
		}
	}()

	go func() {
		defer wg.Done()
		for i := range 5 {
			ch <- i + 11
		}
	}()

	go func() {
		wg.Wait()
		close(ch)
	}()
	
	return ch
}

func main() {
	ch := writer()

	for {
		v, ok := <-ch
		if !ok {
			break
		}
		println(v)
	}

	time.Sleep(1 * time.Second)
}

```

**–î–∞, —É –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–∫–æ–ª—å–∫–æ —É–≥–æ–¥–Ω–æ —á–∏—Ç–∞—Ç–µ–ª–µ–π.**  
**–ù–û:** –∫–∞–∂–¥–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞ **–ø–æ–ª—É—á–∞–µ—Ç —Ä–æ–≤–Ω–æ –û–î–ò–ù —á–∏—Ç–∞—Ç–µ–ª—å**.

–≠—Ç–æ –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ –∫–æ–¥—É –Ω–∏–∂–µ:
```go
package main

import "fmt"

func main() {
	ch := make(chan int)

	go func() {
		for i := range 100000 {
			ch <- i
		}
		close(ch)
	}()

	// go func() {
	// 	for i := range 100000 {
	// 		ch <- i * 2
	// 	}
	// 	close(ch)
	// }()

	go func() {
		for v := range ch {
			fmt.Println("v =", v, "worker 1")
		}
	}()

	for v := range ch {
		fmt.Println("v =", v, "worker 2")
	}
}

```

–≠—Ç–æ—Ç –∫–æ–¥ –ø–æ —Å—É—Ç–∏:
### üîπ **fan-out**

- –æ–¥–∏–Ω –∫–∞–Ω–∞–ª
    
- –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ—Ä–∫–µ—Ä–æ–≤
    
- –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏

![[Pasted image 20260131153125.png]]