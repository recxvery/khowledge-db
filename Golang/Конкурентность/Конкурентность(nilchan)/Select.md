[[–ì–æ—Ä—É—Ç–∏–Ω—ã –∏ –∫–∞–Ω–∞–ª—ã]]


**select** - –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∫–∞–Ω–∞–ª–∞–º–∏ —Å—Ä–∞–∑—É. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–¥–Ω–∏–º –∏–∑ –∫–∞–Ω–∞–ª–æ–≤ –ø–æ–∫–∞ –¥—Ä—É–≥–æ–π –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω. –ï—Å–ª–∏ –æ–±–∞ –≥–æ—Ç–æ–≤—ã - –æ–Ω –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–∞–Ω–¥–æ–º–Ω–æ. –ß–∞—â–µ –≤—Å–µ–≥–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –∏ –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–∞–Ω–∞–ª–æ–≤ –≤—Å—è–∫–∏—Ö.
****
–ü—Ä–∏–º–µ—Ä `select'a` –ø–æ–ª–Ω–æ—Å—Ç—å—é:
```go
func main() {
	intCh := make(chan int)
	stringCh := make(chan string)

	go func() {
		i := 0
		for {
			intCh <- i
			i++

			time.Sleep(1000 * time.Millisecond)
		}
	}()

	go func() {
		i := 1
		for {
			stringCh <- "hi" + fmt.Sprint(i)
			i++

			time.Sleep(500 * time.Millisecond)
		}
	}()
	for {
		select {
		case number := <-intCh:
			fmt.Println("intCh", number)

		case str := <-stringCh:
			fmt.Println("stringCh", str)
		}
	}
}
```

–í—ã–≤–æ–¥:
```
intCh 0
stringCh hi1
stringCh hi2
intCh 1
stringCh hi3
stringCh hi4
intCh 2
stringCh hi5
stringCh hi6
intCh 3
```
`stringCh` –Ω–µ –∂–¥—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥—Ä—É–≥–æ–≥–æ –∫–∞–Ω–∞–ª–∞, –∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–¥–µ—Å—å –∏ —Å–µ–π—á–∞—Å –ø–æ—Ç–æ–º—É —á—Ç–æ —É –Ω–µ–≥–æ `time.Sleep` –≤ –¥–≤–∞ —Ä–∞–∑–∞ –º–µ–Ω—å—à–µ.

–ë–µ–∑ `select'a` —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–ª–µ–¥—É—é—â–∏–π:
```
intCh 0
stringCh hi1
intCh 1
stringCh hi2
intCh 2
stringCh hi3
intCh 3
stringCh hi4
```

### default

```go
func main() {
	intCh := make(chan int)
	stringCh := make(chan string)

	go func() {
		i := 0
		for {
			time.Sleep(101 * time.Millisecond)
			intCh <- i
			i++

		}
	}()

	go func() {
		i := 1
		for {

			time.Sleep(100 * time.Millisecond)
			stringCh <- "hi" + fmt.Sprint(i)
			i++
		}
	}()

	time.Sleep(50 * time.Millisecond)
	select {
	case number := <-intCh:
		fmt.Println("intCh", number)
	case str := <-stringCh:
		fmt.Println("stringCh", str)
	default:
		fmt.Println("–û–±–∞ –∫–∞–Ω–∞–ª–∞ –Ω–µ –≥–æ—Ç–æ–≤—ã")
	}
```

–ö–æ–≥–¥–∞ –æ–±–∞ –∫–∞–Ω–∞–ª—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã, —Ç–æ `select` –≤—ã–ø–æ–ª–Ω—è–µ—Ç `default`. –ó–¥–µ—Å—å –∏ –∫–∞–Ω–∞–ª—ã –Ω–µ –±—É—Ñ–∏—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã –∏ –∏–º –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ —É–∂–µ –ø–æ—Å–ª–µ —Å–Ω–∞. –¢–∞–∫ —á—Ç–æ –≤ —ç—Ç–æ–º –ø—Ä–∏–º–µ—Ä–µ –±—É–¥–µ—Ç –≤–µ—á–Ω—ã–π `default`

`select` –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è, –µ—Å–ª–∏ —á—Ç–æ –≤ –Ω—ë–º –Ω–µ—Ç `default`.
`select` –±–µ–∑ `default'a` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è.
–ï—Å–ª–∏ `default` –Ω–µ—Ç ‚Äî `select` –æ–±—è–∑–∞–Ω –∂–¥–∞—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞.
#### –î–ó 
![[Pasted image 20260111060042.png]]
```go
package main

import (
	"fmt"
	"math/rand"
	"time"
)

func main() {
	ch1, ch2 := make(chan int64, 1), make(chan int64, 1)
	times := []time.Duration{
		100 * time.Millisecond,
		200 * time.Millisecond,
		300 * time.Millisecond,
		400 * time.Millisecond,
		500 * time.Millisecond,
		600 * time.Millisecond,
		700 * time.Millisecond,
		800 * time.Millisecond,
		900 * time.Millisecond,
		1000 * time.Millisecond,
	}

	go func(ch chan int64) {
		for {
			randomInt := rand.Intn(len(times))
			time.Sleep(times[randomInt])
			ch <- int64(times[randomInt])
		}
	}(ch1)

	go func(ch chan int64) {
		for {
			randomInt := rand.Intn(len(times))
			time.Sleep(times[randomInt])
			ch <- int64(times[randomInt])
		}
	}(ch2)

	time.Sleep(500 * time.Millisecond)

	select {
	case num1 := <-ch1:
		fmt.Println("–°—Ä–∞–±–æ—Ç–∞–ª 1 –∫–∞–Ω–∞–ª. –ß–∏—Å–ª–æ:", num1)
	case num2 := <-ch2:
		fmt.Println("–°—Ä–∞–±–æ—Ç–∞–ª 2 –∫–∞–Ω–∞–ª. –ß–∏—Å–ª–æ:", num2)
	default:
		fmt.Println("–û—Ç—Ä–∞–±–æ—Ç–∞–ª –±–ª–æ–∫ default")
	}

}

//–±—É–¥–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–≤–æ–¥ —Ç–∞–∫ –∫–∞–∫ –º—ã –≤ –æ–±–æ–∏—Ö –≥–æ—Ä—É—Ç–∏–Ω–∞—Ö –º–∞–∫—Å–∏–º–∞–ª–¥—å–Ω–æ —Ä–∞–Ω–¥–æ–º–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏. –¢–∞–∫ –∂–µ –∏ —Å default'–æ–º –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–æ–≥–æ –∫–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–ø–∞–¥–µ—Ç –≤ –∑–∞–¥–µ—Ä–∂–∫–µ –≥–æ—Ä—É—Ç–∏–Ω
```
–†–µ–∑—É–ª—å—Ç–∞—Ç `select` –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–ª—É—á–∞–π–Ω—ã–π –∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤ –≤ –º–æ–º–µ–Ω—Ç –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –°–ª—É—á–∞–π–Ω–æ—Å—Ç—å –∑–∞–¥–µ—Ä–∂–µ–∫ –≤–ª–∏—è–µ—Ç –Ω–∞ —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

–í–∞–∂–Ω–æ–µ —É—Ç–æ—á–Ω–µ–Ω–∏–µ –∫ –Ω–µ–º—É:
### üü¢ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –æ–±–µ –≥–æ—Ä—É—Ç–∏–Ω—ã —Å–ø–∞–ª–∏ < 500ms
- `ch1` ‚ùó –∑–∞–ø–æ–ª–Ω–µ–Ω
    
- `ch2` ‚ùó –∑–∞–ø–æ–ª–Ω–µ–Ω
    

‚û°Ô∏è **–æ–±–∞ `case` –≥–æ—Ç–æ–≤—ã**  
‚û°Ô∏è `select` –≤—ã–±–µ—Ä–µ—Ç **—Å–ª—É—á–∞–π–Ω—ã–π case**  
‚û°Ô∏è `default` ‚ùå –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è

---

### üü° –°—Ü–µ–Ω–∞—Ä–∏–π 2: —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ —É—Å–ø–µ–ª–∞
–ù–∞–ø—Ä–∏–º–µ—Ä:
- `ch1` ‚Äî –∑–∞–ø–æ–ª–Ω–µ–Ω
    
- `ch2` ‚Äî –ø—É—Å—Ç
    

‚û°Ô∏è —Å—Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ `case ch1`**  
‚û°Ô∏è `default` ‚ùå

---
### üî¥ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –æ–±–µ –≥–æ—Ä—É—Ç–∏–Ω—ã —Å–ø—è—Ç ‚â• 500ms

- `ch1` ‚Äî –ø—É—Å—Ç
    
- `ch2` ‚Äî –ø—É—Å—Ç
    

‚û°Ô∏è **–Ω–∏ –æ–¥–∏–Ω case –Ω–µ –≥–æ—Ç–æ–≤**

#### time.After()
–µ—Å—Ç—å –µ—â—ë —Ç–∞–∫–∞—è –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è. –í–æ—Ç –¥–æ–ø—É—Å—Ç–∏–º –µ—ë –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–≥–ª—è–¥–Ω–æ–µ
```go
	go func() {
		sleepMs := times[rand.Intn(len(times))]
		time.Sleep(sleepMs)
		ch <- 1
	}()

	select {
	case num := <- ch:
		fmt.Println("–£—Å–ø–µ–ª–∏ –≤–∑—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–∞–Ω–∞–ª–∞, –∑–Ω–∞—á–µ–Ω–∏–µ", num) 
	case <- time.After(500 * time.Millisecond):
		fmt.Println("—Ç–∞–π–º–∞—É—Ç")
	}
```

| time.Sleep()                 | time.After()                            |
| ---------------------------- | --------------------------------------- |
| –±–ª–æ–∫–∏—Ä—É–µ—Ç –≥–æ—Ä—É—Ç–∏–Ω—É           | –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∞ –∂–¥—ë—Ç –≤ `select`          |
| –ù–µ–ª—å–∑—è –ø—Ä–µ—Ä–≤–∞—Ç—å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è | **–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ—Ç–º–µ–Ω—è–µ—Ç—Å—è**¬†–¥—Ä—É–≥–∏–º–∏¬†`case` |
| "–ú—ë—Ä—Ç–≤—ã–µ" 10 —Å–µ–∫—É–Ω–¥          | –¢–æ–ª—å–∫–æ¬†**–∞–∫—Ç–∏–≤–Ω–æ –∂–¥—ë—Ç**¬†–≤¬†`select`<br>  |
–†–∞–∑–Ω–∏—Ü–∞:
- **Sleep**: "–ü–æ–¥–æ–∂–¥–∏ 2 —Å–µ–∫—É–Ω–¥—ã –∏ –≤—Å—ë" ‚Äî¬†**–≥–ª—É–ø–æ –∂–¥—ë—Ç**

- **After**: "–ü–æ–¥–æ–∂–¥–∏ 1 —Å–µ–∫—É–Ω–¥—É –ò–õ–ò –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –ø—Ä–∏–±–µ–∂–∏—Ç —Ä–∞–Ω—å—à–µ" ‚Äî¬†**—É–º–Ω–æ –≤—ã–±–∏—Ä–∞–µ—Ç**

C—É—Ç—å –≤ —Ç–æ–º —á—Ç–æ `time.After()` + `select` –≤—Å–µ–≥–¥–∞ –≥–æ—Ç–æ–≤ –∫ –¥–µ–π—Å—Ç–≤–∏—é –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç, `sleep` - —Å–ø–∏—Ç