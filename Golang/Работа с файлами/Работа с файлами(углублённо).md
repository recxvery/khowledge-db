																																																																																																					 ss1## –ù–ï –ó–ê–ë–´–í–ê–ï–ú –û –û–ë–†–ê–ë–û–¢–ö–ï –û–®–ò–ë–û–ö –í –†–ê–ë–û–¢–ï –° –§–ê–ô–õ–ê–ú–ò
## **Reader**

–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```go
type Reader interface {
	Read(p []byte) (n int, err error)
}
```

–û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–∞–∫—É—é-—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—é. –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –µ—ë –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏ –ø–æ—Ç–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–∞–π—Ç –∫–æ—Ç–æ—Ä–æ–µ –º—ã –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∏ –æ—à–∏–±–∫—É. 

#### –ö–∞—Å—Ç–æ–º–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Reader'a

```go
			type NumsReader struct {
	nums string
}

func simpleReader() {
	buf := make([]byte, 10) //–∑–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ —é–∑–∞–µ–º –±—É—Ñ–µ—Ä

					reader := NumsReader{nums: "1,2,3,4,5,6,7,8=,g9"} //reader –±—É–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –≤—Å—ë —á—Ç–æ —É–≥–æ–¥–Ω–æ –∫—Ä–æ–º–µ —Ü–∏—Ñ—Ä

	count, err := reader.Read(buf)
	if err != nil && err != io.EOF {
		//–∑–∞–±–∞–≤–Ω—ã–π –º–æ–º–µ–Ω—Ç —á—Ç–æ io.EOF != "EOF". —Ç–∞–∫ –∫–∞–∫ –ø–æ —Ñ–∞–∫—Ç—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ä–∞–∑–Ω—ã–µ -- –æ–±—ä–µ–∫—Ç—ã —Ä–∞–∑–Ω—ã–µ
		//—Ç–æ –µ—Å—Ç—å GO –¥–ª—è –∫–∞–∂–¥—ã–π –æ—à–∏–±–∫–∏ –ø—Ä–∏–¥—É–º—ã–≤–≤–∞–µ—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
		log.Fatal(err)
	}

	fmt.Println(string(buf), count)
}

func (r NumsReader) Read(b []byte) (n int, err error) {
	var count int
	for _, v := range r.nums {
		if v >= '0' && v <= '9' {
			b[count] = byte(v) //–∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ñ–∞–π–ª—ã –≤ –º–∞—Å—Å–∏–≤
			count += 1
		}
	}

	return count, io.EOF //—Å—Ç–∞–≤–∏–º —á—Ç–æ –æ—à–∏–±–∫–∞ = "EOF" (–∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞)
}
```
–ó–¥–µ—Å—å –≤—Ä–æ–¥–µ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ —Å—É–ø–µ—Ä —Å–ª–æ–∂–Ω–æ–≥–æ. –º—ã –¥–µ–ª–∞–µ–º –±—É—Ñ–µ—Ä –≤ –Ω–µ–≥–æ –≤–∫–ª–∞–¥—ã–≤–∞–µ–º –≤—Å–µ —Å–∏–º–≤–æ–ª—ã –µ—Å–ª–∏ –≤—ã–≤–æ–¥–∏–º —Ü–∏—Ñ—Ä—ã. –ù–∞—à –º–∞—Å—Å–∏–≤ –º–µ–Ω—è–µ—Ç—Å—è, –∞ –ø–æ—Ç–æ–º –º—ã –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏–º —Å—á—ë—Ç—á–∏–∫ –∏ –æ—à–∏–±–∫—É `"End of file"` .  –¢—É—Ç –º–æ–∂–µ—Ç –≤–æ–∑–Ω–∏–∫–∞—Ç—å —Å–ª–µ–¥—É—é—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞. –î–æ–ø—É—Å—Ç–∏–º –º—ã –∑–∞–≥—Ä—É–∂–∞–µ–º –≥–∏–≥–∞–±–∞–π—Ç–Ω—ã–π —Ñ–∞–π–ª. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –±—É—Ñ–µ—Ä –±—É–¥–µ—Ç –ø–æ—Ç—Ä–µ–±–ª—è—Ç—å –æ—á–µ–Ω—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏. –¢–∞–∫ —á—Ç–æ –ø—Ä–∏—Å—Ç—É–ø–∏–º –∫ —á—É—Ç–∫–∞ –∏–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

```go
type RowsReader struct {
	text string
}

func (r *RowsReader) Read(n []byte) (int, error) {
	var i int
	for i = 0 ; i < len(r.text); i++ {
		if r.text[i] == '\n' {
			r.text = r.text[i + 1:] 
			//–≥—Ä—É–±–æ –≥–æ–≤–æ—Ä—è –æ—Ç—Ä–µ–∑–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—à—É—é —Å—Ç—Ä–æ–∫—É –¥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞ —ç—Ç–æ–π —Å—Ç—Ä–æ—á–∫–æ–π –∫–æ–¥–∞
			break //? —Ç–µ–ø–µ—Ä—å –ø–æ–Ω—è—Ç–Ω–æ. Break –∑–¥–µ—Å—å –Ω—É–∂–µ–Ω —á—Ç–æ–±—ã –º—ã –ø—Ä–æ—Å—Ç–æ –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏
			//–∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –ø–æ–∑–∂–µ –æ—á–∏—â–∞–ª–∏ –∏—Ö. –ê–ª–≥–æ—Ä–∏—Ç–º –∫–æ—Ç–æ—Ä—ã–π –Ω–∏—Ö—É–µ–≤–æ —Ç–∞–∫ —ç–∫–æ–Ω–æ–º–∏—Ç –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –ø–∞–º—è—Ç—å.
		}

		n[i] = r.text[i] //–∑–¥–µ—Å—å –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –º–∞—Å—Å–∏–≤ –±–∞–π—Ç—ã –∏—Å—Ö–æ–¥–Ω–æ–≥–æ

		if i == len(r.text) - 1 { 
			//–µ—Å–ª–∏ –¥–æ—Å—Ç–∏–≥–∞–µ–º –∫–æ–Ω—Ü–∞ —Å–ø–∏—Å–∫–∞. —Ç–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω—É–ª—è–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –º–∞—Å—Å–∏–≤. –ó–¥–µ—Å—å –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É *reciever
			r.text = ""
			return i + 1, io.EOF //io.EOF –¥–ª—è –±—É–¥—É—â–µ–≥–æ —É—Å–ª–æ–≤–∏—è
		}
	}
	return i + 1, nil //i + 1. —Ç.–∫. i –Ω–∞ –ø–µ—Ä–≤–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ —Ä–∞–≤–µ–Ω –Ω—É–ª—é
	}


func rowsReader() {
	rowsReader := RowsReader{text : "first line\nsecond line\nthird line"}

	var (
		err error
		count int
	)

	row := make([]byte, 100)
	for err != io.EOF { //—Ü–∏–∫–ª –ø—Ä–µ—Ä–≤—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –∫–æ–≥–¥–∞ –¥–æ–π–¥—ë—Ç –¥–æ END OF FILE 
		count, err = rowsReader.Read(row)
		fmt.Println(string(row[:count]), count) //rows[:count], —Ç.–∫. –∏–Ω–∞—á–µ —É –Ω–∞—Å –±—É–¥—É—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —á–∞—Å—Ç–∏—á–∫–∏ –±—É—Ñ–µ—Ä–∞ –∏ –≤—ã–≤–æ–¥–∏—Ç—å—Å—è –ª–∏—à–Ω–∏–µ —Å–∏–º–≤–æ–ª—ã
	}
}
	```

### –ü—Ä–æ—Å—Ç–µ–π—à–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è writer'a 

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å writer'a**
```go
type Writer interface {
	Write(p []byte) (int, error)
}
```


**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ:**

```go
func simpleWriter() {
	p := []byte{'1', ',', '2', '.', '/', '3', '='}
	writer := NumsWriter{storedNums: make([]byte, 10)}
	count, err := writer.Write(p)
	if err != nil && err != io.EOF {
		log.Fatal(err)
	}
	fmt.Println(string(writer.storedNums), count)
}

	 
func (w NumsWriter) Write(p []byte) (int, error) {
	var count int
	for i := range p {
		if p[i] >= '0' && p[i] <= '9' {
			w.storedNums[i] = p[i]
			count++
		}
	}

	return count, io.EOF
}
	 
```
–•–∑ —Ç—É—Ç –ø–æ—è—Å–Ω—è—Ç—å –≤—Ä–æ–¥–µ –∫–∞–∫ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ `Reader'a` –≤—Å—ë –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ—á–µ–≤–∏–¥–Ω–æ. –ü—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º —Ç–æ —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–∞–º–∏ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É. 

## **Key differnce. io.Writer vs io.Reader**

–û—á–µ–Ω—å –ø–æ—Ö–æ–∂–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Ç–∞–∫ –≤ —á—ë–º –∏—Ö —Ä–∞–∑–ª–∏—á–∏–µ?


| io.Reader                                                                                                                                                                                                          | io.Writer                                                                                                      |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------- |
| `io.Reader` - –≥—Ä—É–±–æ –≥–æ–≤–æ—Ä—è —É–∂–µ –∑–Ω–∞–µ—Ç –≥–¥–µ —á—Ç–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏ –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –Ω–∞—à –Ω–æ—Å–∏—Ç–µ–ª—å. –¢–æ –µ—Å—Ç—å –ø–æ —Å—É—Ç–∏, –µ—Å–ª–∏ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –ø—Ä–∏–º–µ—Ä —Å —Ñ–ª–µ—à–∫–æ–π. –¢–æ –Ω–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä —á—Ç–æ-—Ç–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–∑ —Å–≤–æ–µ–π –ø–∞–º—è—Ç–∏ –Ω–∞ —Ñ–ª–µ—à–∫—É. | –ó–¥–µ—Å—å —Å —Ç–æ—á–Ω–æ—Å—Ç—å—é –¥–∞ –Ω–∞–æ–±–æ—Ä–æ—Ç. `Writer` - —Ñ–ª–µ—à–∫–∞. –ò –∫–æ–º–ø—å—é—Ç–µ—Ä –ø–æ —Å—É—Ç–∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å —Ñ–ª–µ—à–∫–∏ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–≤–æ–π –¥–∏—Å–∫. |
| –ó–Ω–∞–µ—Ç –≥–¥–µ –Ω–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –∏ –∏–∑ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞—à –Ω–æ—Å–∏—Ç–µ–ª—å                                                                                                                                                              | –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–Ω–∞—è —á—Ç–æ –≤ –Ω–∏—Ö –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∫—É–¥–∞-–ª–∏–±–æ                                            |
| –ß—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞                                                                                                                                                                                                       | –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª                                                                                                  |
| –ò–∑ –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ –∫–æ–¥                                                                                                                                                                                                  | –ò–∑ –∫–æ–¥–∞ –≤ –ø—Ä–∏—ë–º–Ω–∏–∫                                                                                             |
| –ö–∞–∫ –≤ –ø–∞—Å–∫–∞–ª–µ. Readln(–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è) - –∑–∞–ø–∏—Å—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é                                                                                                                                                            | Writeln(–ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è) - –≤—ã–≤–æ–¥ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤ –∫–æ–Ω—Å–æ–ª–∏                                                          |
 ```
[Reader] --> –¥–∞–Ω–Ω—ã–µ --> [—Ç–≤–æ–π –∫–æ–¥] --> –¥–∞–Ω–Ω—ã–µ --> [Writer]
```

## –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (os package)

–§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞:
```go
newFile, err := os.Create("new.txt") //–ø–æ–ª—É—á–∞–µ–º —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ñ–∞–π–ª –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—à–∏–±–∫–∏
	if err != nil { log.Fatal(err) }
```

–ß—Ç–æ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º:
```go
func Create(name string) (*File, error) {
	return OpenFile(name, O_RDWR|O_CREATE|O_TRUNC, 0666)
} //name - –ø–æ–Ω—è—Ç–Ω–æ, –∞ —Ñ–ª–∞–≥–∏?
```

–ü–æ—è—Å–Ω–µ–Ω–∏–µ –ø–æ —Ñ–ª–∞–≥–∞–º –Ω–∏–∂–µ: 
```go
const (
	// Exactly one of O_RDONLY, O_WRONLY, or O_RDWR must be specified.
	O_RDONLY int = syscall.O_RDONLY // open the file read-only.
	O_WRONLY int = syscall.O_WRONLY // open the file write-only.
	O_RDWR   int = syscall.O_RDWR   // open the file read-write.
	// The remaining values may be or'ed in to control behavior.
	O_APPEND int = syscall.O_APPEND // append data to the file when writing.
	O_CREATE int = syscall.O_CREAT  // create a new file if none exists.
	O_EXCL   int = syscall.O_EXCL   // used with O_CREATE, file must not exist.
	O_SYNC   int = syscall.O_SYNC   // open for synchronous I/O.
	O_TRUNC  int = syscall.O_TRUNC  // truncate regular writable file when opened.
)
```
`O_TRUNC` - –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –º—ã –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∫–∞–∫–æ–π-–ª–∏–±–æ —Ñ–∞–π–ª(–¥–∞–∂–µ –µ—Å–ª–∏ –≤ –Ω—ë–º —É–∂–µ —á—Ç–æ-—Ç–æ –Ω–∞—Ö–æ–¥–∏–ª–æ—Å—å) - —Å—Ç–∏—Ä–∞–µ–º –µ–≥–æ –¥–æ –Ω—É–ª—è –±–∞–π—Ç. –¢–æ –µ—Å—Ç—å –æ—á–∏—â–∞–µ–º –≤—Å—ë —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ –Ω—ë–º –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –¥–ª—è –∑–∞–ø–∏—Å–∏

%% truncate - —É—Å–µ–∫–∞—Ç—å —Å –∞–Ω–≥–ª.%%

–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å—Ç–µ—Ü–∫–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏. –ó–∞–ø–∏—Å–∞—Ç—å —á—Ç–æ-–ª–∏–±–æ –≤–Ω—É—Ç—Ä—å - `file.WriteString()`. –¢–∞–∫–∂–µ –Ω–µ –∑–∞–±—ã–≤–∞–µ–º –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ñ–∞–π–ª –ø–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –Ω–∏–º —á—Ç–æ –±—ã —Å–ª—É—á–∞–π–Ω–æ –Ω–µ —Å–¥–µ–ª–∞—Ç—å —Å –Ω–∏–º —á—Ç–æ-—Ç–æ + —É –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –û–°–æ–∫ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–∞–º–∏ + —ç–∫–æ–Ω–æ–º–∏–º —Ä–µ—Å—É—Ä—Å—ã –∫–æ–º–ø—å—é—Ç–µ—Ä–∞. 

```go
	n, err := newFile.WriteString("Drake - Redemption")
	if err != nil {log.Fatal(err)}
	fmt.Println(n)
	
	err = newFile.Close()
	if err != nil {
		log.Fatal(err)
	}
```

#### –ß—Ç–µ–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞:

```go
	file, err := os.Open("new.txt")//READONLY - —Ñ–ª–∞–∂–æ–∫
	if err != nil {
		log.Fatal()
	}

	buf := make([]byte, 100)
	//—Å–æ–∑–¥–∞—ë–º –±—É—Ñ–µ—Ä -- –≤–∫–ª–∞–¥—ã–≤–∞–µ–º –µ–≥–æ –≤ –º–µ—Ç–æ–¥ Read() -- –≤—ã–≤–æ–¥–∏–º –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—è –≤ —Å—Ç—Ä–æ–∫—É
	n, err = file.Read(buf)
	if err != nil {
		log.Fatal(err)
	}

	fmt.Println(string(buf), n) //n - —á–∏—Å–ª–æ –∑–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö –±–∞–π—Ç–æ–≤
	if err = file.Close(); err != nil { //–∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
		log.Fatal()
	}
```
–í—Å–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

–ß—Ç–æ–±—ã –Ω–µ –¥–µ–ª–∞—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ —Å–æ–∫—Ä–∞—Ç–∏—Ç—å —ç—Ç–∏–º –∫–æ–¥–æ–º:
```go
data, err := os.ReadFile("new.txt")
```

### –ß—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª

–ß—Ç–æ–±—ã –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å —Ñ–∞–π–ª(–ø–æ —Å—É—Ç–∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –º–æ–∂–µ–º —Ç–æ–ª—å–∫–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å), –º–æ–∂–µ–º –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è Openfile(), –ø–æ—Å—Ç–∞–≤–∏—Ç—å –≤ –Ω—ë–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–ª–∞–≥–∏ –∏ —é–∑–∞—Ç—å —É–∂–µ –µ–≥–æ. –ú—ã —Å–º–æ–∂–µ–º –∏ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –∏ —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª.
```go
	file, err = os.OpenFile("new.txt", os.O_RDWR | os.O_APPEND, 0666)
	if err != nil {
		log.Fatal(err)
	}

	defer func () {
		err = file.Close()
		if err != nil {log.Fatal(err)}
	}()
```

### –ó–∞–ø–∏—Å—å –≤ —Ñ–∞–π–ª
```go
	if n, err = file.WriteString("\nDrake - Hotline Bling"); err != nil {log.Fatal(err)}
```

**–ü–æ—á—Ç–∏ —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º–æ —Å `os.WriteFile()`**, –Ω–æ —Ç–∞–º –Ω–∞—Ö—É–π –≤–µ—Å—å —Ñ–∞–π–ª –æ–ø—è—Ç—å –æ—á–∏—â–∞–µ—Ç—Å—è –¥–æ 0 –±–∞–π—Ç. –ò –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ(–º–µ–º), –∫–æ—Ä–æ—á–µ —Å –Ω—É–ª—è —Ñ–∞–π–ª –ø–∏—à–µ—Ç—Å—è.
```go
if err = os.WriteFile("new.txt", []byte{'\n', 'D', 'r', 'a', 'k', 'e', ' ', '-', ' ', '9' }, 0666);
```



### –ü—Ä–∏–º–µ—Ä (–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ —Ñ–∞–π–ª, —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–∞ –∏ —Å—á–∏—Ç–∞–µ–º –∏—Ö —Å—É–º–º—É)
–í—Å–µ –ø–æ—è—Å–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
```go
package main

import (
	"fmt"
	"io"
	"log"
	"os"
)

type NewReader struct {
	text string
}

type NewWriter struct {
	nums []byte
	totalSum int
}

func main() {
	data, err := os.ReadFile("numbers.txt")
	if err != nil {
		log.Fatal(err)
	}

	reader := &NewReader{text : string(data)}
	writer := &NewWriter{}
	buf := make([]byte, 32)

	for {
		n, rerr := reader.Read(buf)
		if n > 0 { //—ç—Ç–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ–π–¥—ë—Ç –µ—Å–ª–∏ —É –Ω–∞—Å –Ω–∏—Ö—É—è –Ω–µ—Ç—É –≤ —Ñ–∞–π–ª–µ
			//c—É—Ç—å —Ü–∏–∫–ª–∞ –≤ —Ç–æ–º —á—Ç–æ –ø–æ —Å—Ç—Ä–æ—á–∫–∞–º writer –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –±–∞–π—Ç—ã
 			_, werr := writer.Write(buf[:n]) //—á—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ
 			//–Ω–æ–≤—ã–µ –±–∞–π—Ç—ã
			if werr != nil && werr != io.EOF {
				log.Fatal(werr)
			}
		}
		if rerr == io.EOF { //–ø–æ–∫–∞ –Ω–µ –≤–µ—Ä–Ω—ë—Ç—Å—è io.EOF –≤–µ—á–Ω–æ –≥–æ–Ω—è–µ–º —Ü–∏–∫–ª
			break
		}

		if rerr != nil {
			log.Fatal(rerr)
		}
	}

	err = os.WriteFile("sum.txt", []byte(fmt.Sprintf("%d", writer.totalSum)), 0666)
	if err != nil {
		log.Fatal(err)
	}
	fmt.Println("Total Sum is:", writer.totalSum)
}


func (r *NewReader) Read(buf []byte) (int, error) {
	if len(r.text) == 0 { // –µ—Å–ª–∏ –∏–∑ —Ñ–∞–π–ª–∞ –Ω–µ—á–µ–≥–æ  –≤–∑—è—Ç—å —Ç–æ –ø—Ä–æ—Å—Ç–æ –≤—ã–≤–æ–¥–∏–º 0- —á –∏—Å–ª–æ –±–∞–π—Ç–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∏ —á—Ç–æ –¥–æ—á–∏—Ç–∞–ª–∏ –¥–æ –∫–æ–Ω—Ü–∞
		return 0, io.EOF
	}
	w := 0
	i := 0

	for i < len(r.text) && w < len(buf) {
		ch := r.text[i]

		if ch >= '0' && ch <= '9' {
			buf[w] = ch
			w++
		}

		if ch == '\n' {
			buf[w] = '\n' //—á—Ç–æ–±—ã –±—É–¥—É—â–µ–º writer —á–∏—Ç–∞–ª –ø–æ—Å—Ç—Ä–æ—á–Ω–æ –≤—Å—ë
			w++
			r.text = r.text[i + 1:] 
			return w, nil //—á–∏—Å–ª–æ –±–∞–π—Ç–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø–∏—Å–∞–ª–∏
		}
		if i == len(r.text) - 1 { //–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ 
		//–µ—Å–ª–∏ —É –Ω–∞—Å –≤ —Ñ–∞–π–ª–µ –≤ –∫–æ–Ω—Ü–µ –Ω–µ –±—É–¥–µ—Ç '\n'
			r.text = ""
			if w > 0 {
				return w, io.EOF
			}
			return 0,io.EOF
		}
		i++ //–¥–≤–∏–≥–∞–µ–º—Å—è –ø–æ –º–∞—Å—Å–∏–≤—É —ë–ø—Ç—ã
	}

	return w, io.EOF
}

func (w *NewWriter) Write(buf []byte) (int, error) {
	for _, ch := range buf {
		if ch >= '0' && ch <= '9' { 
			w.nums = append(w.nums, ch) //—Å–æ–±–∏—Ä–∞–µ–º —Ü–∏—Ñ—Ä—ã —Å—Ç—Ä–æ–∫–∏ –≤ –º–∞—Å—Å–∏–≤
		}

		if ch == '\n' { //–µ—Å–ª–∏ —É –Ω–∞—Å –ø–µ—Ä–µ–Ω–æ—Å —Å—Ç—Ä–æ–∫–∏ —Ç–æ —Å—á–∏—Ç–∞–µ–º —Å—É–º–º—É –≤ —Å—Ç—Ä–æ–∫–µ
			lineSum := 0
			for _, d := range w.nums {
				lineSum += int(d - '0') //—Ç—É—Ç –≤—Å—ë –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ —É –Ω—É–ª—è –∑–Ω–∞—á–µ–Ω–∏–µ = '48'. —É –ø—è—Ç–∏ '53', '53' - '48' = '5'. –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ int –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è 5.
			}
			w.totalSum += lineSum

			w.nums = w.nums[:0] //–æ—á–∏—â–∞–µ–º —Å—Ç—Ä–æ–∫—É
		}
	}
	//–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ–±—ã –æ–ø—è—Ç—å –∂–µ –µ—Å–ª–∏ –Ω–µ –±—ã–ª–æ '\n' –≤ –∫–æ–Ω—Ü–µ –≤—Å–µ —Ä–∞–≤–Ω–æ –≤—Å—ë —Å—Ä–∞–±–æ—Ç–∞–ª–æ
	if len(bufWrite) > 0 && len(w.currentInts) > 0 {
		lineSum := 0
		for _, d := range w.currentInts {
			lineSum += int(d - '0')
	}

	w.totalSum += lineSum
	w.currentInts = w.currentInts[:0]

	return len(buf), nil //—ç—Ç–∏–º –≤—ã–≤–æ–¥–æ–º –æ–±–æ–∑–Ω–∞—á–∞–µ–º —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏ –≤—Å–µ –±–∞–π—Ç—ã —Ñ–∞–π–ª–∞
	} 
```



---

**–ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –º—ã –Ω–µ –ø–æ—Å—Ç–∞–≤–∏–º:**
```go
_, werr := writer.Write(buf[:n]) 
```
# üî• –ù–ê–ß–ù–Å–ú –° –ü–†–ò–ú–ï–†–ê

–§–∞–π–ª:

`123 45`

–ë—É—Ñ–µ—Ä:

`[ _ _ _ _ _ ]  // 5 –ø—É—Å—Ç—ã—Ö —Å–ª–æ—Ç–æ–≤`

---

# üìò –ò–¢–ï–†–ê–¶–ò–Ø 1 ‚Äî —á–∏—Ç–∞–µ–º "123\n"

Reader –∫–ª–∞–¥—ë—Ç 4 –±–∞–π—Ç–∞:

`buf = [ '1' '2' '3' '\n' _ ] n = 4`

ASCII –±–∞–π—Ç—ã:

`[49 50 51 10 0]`

–ó–∞–ø–æ–º–Ω–∏–ª–∏.

Writer –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¢–û–õ–¨–ö–û `buf[:4]`  
–ù–æ –µ—Å–ª–∏ –æ–Ω –≤–æ–∑—å–º—ë—Ç –≤–µ—Å—å `buf`, –æ–Ω —É–≤–∏–¥–∏—Ç –ª–∏—à–Ω–∏–π –Ω–æ–ª—å.

---

# üìï –ò–¢–ï–†–ê–¶–ò–Ø 2 ‚Äî —á–∏—Ç–∞–µ–º "45\n"

–í–ù–ò–ú–ê–ù–ò–ï: Reader –ø–∏—à–µ—Ç –¢–û–õ–¨–ö–û –ü–ï–†–í–´–ï `n` –Ø–ß–ï–ï–ö!

–û–Ω –æ–±–Ω–æ–≤–∏—Ç –¢–û–õ–¨–ö–û –ø–µ—Ä–≤—ã–µ 3:

`buf = [ '4' '5' '\n' 10 0 ]`

–ü–æ—á–µ–º—É —Ç–∞–∫?

–ü–æ—Ç–æ–º—É —á—Ç–æ **–≤ —è—á–µ–π–∫—É 3 Reader –Ω–µ –ø–∏—Å–∞–ª**, —Ç–∞–º –æ—Å—Ç–∞–ª—Å—è —Å—Ç–∞—Ä—ã–π `'\n'` –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —á—Ç–µ–Ω–∏—è.  
–ê —è—á–µ–π–∫–∞ 4 ‚Äî —Ç–∞–∫–∂–µ —Å—Ç–∞—Ä—ã–π `0`.

–ü–û–î –ö–ê–ü–û–¢–û–ú:

`buf –ü–û–°–õ–ï –ò–¢–ï–†–ê–¶–ò–ò 1: [49 50 51 10 0]  Reader –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç 3 –Ω–æ–≤—ã—Ö –±–∞–π—Ç–∞: buf[0] = 52 ('4') buf[1] = 53 ('5') buf[2] = 10 ('\n')  –í—Å—ë. –û—Å—Ç–∞–ª—å–Ω–æ–µ –Ω–µ —Ç—Ä–æ–≥–∞–µ–º.  –ò–¢–û–ì: buf = [52 53 10 10 0]`

üéØ **–¢—ã –≤–∏–¥–∏—à—å? –ù–µ –¥–≤–∞ —Ä–∞–∑–∞ '\n' –≤ —Ñ–∞–π–ª–µ ‚Äî –∞ –æ–¥–∏–Ω '\n' –∏–∑ —Ñ–∞–π–ª–∞ + –æ–¥–∏–Ω '\n' –æ—Å—Ç–∞–ª–æ—Å—å –æ—Ç —Å—Ç–∞—Ä–æ–≥–æ —á—Ç–µ–Ω–∏—è.**

–ê –í–û–¢ –¢–ï–ü–ï–†–¨ –í–ò–ó–£–ê–õ–¨–ù–û:

`–î–æ          –ü–æ—Å–ª–µ ----Reader writes---->  [49 50 51 10 0]  ‚Üì  ‚Üì  ‚Üì [52 53 10 10 0]             ‚Üë          —Å—Ç–∞—Ä—ã–π –±–∞–π—Ç,          –º—ã –µ–≥–æ –Ω–µ —É–±—Ä–∞–ª–∏`